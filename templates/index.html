{% extends "base.html" %}
{% block content %}
<section class="new-task">
  <form method="post" action="{{ url_for('create_task') }}">
    <input name="title" placeholder="ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ..." maxlength="140" />
    <button type="submit">ï¼‹ è¿½åŠ </button>
  </form>
</section>

<section class="filters">
  <form method="get" action="{{ url_for('index') }}">
    <input name="q" value="{{ q }}" placeholder="æ¤œç´¢ (ã‚¿ã‚¤ãƒˆãƒ«éƒ¨åˆ†ä¸€è‡´)" />
    <select name="show">
      <option value="all"  {{ 'selected' if show=='all'  else '' }}>ã™ã¹ã¦</option>
      <option value="open" {{ 'selected' if show=='open' else '' }}>æœªå®Œäº† ({{ open_count }})</option>
      <option value="done" {{ 'selected' if show=='done' else '' }}>å®Œäº† ({{ done_count }})</option>
    </select>
    <button type="submit">çµã‚Šè¾¼ã¿</button>
  </form>
</section>

<section class="list">
  {% if tasks|length == 0 %}
    <p class="empty">ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% else %}
    <ul>
      {% for t in tasks %}
        <li class="{{ 'done' if t.done else '' }}">
          <form method="post" action="{{ url_for('toggle_task', task_id=t.id) }}">
            <button title="å®Œäº†/æœªå®Œäº†åˆ‡æ›¿">âœ”</button>
          </form>
          <div class="title">{{ t.title }}</div>
          <div class="meta">{{ t.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
          <form method="post" action="{{ url_for('delete_task', task_id=t.id) }}">
            <button class="danger" title="å‰Šé™¤">ğŸ—‘</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</section>
{% endblock %}
